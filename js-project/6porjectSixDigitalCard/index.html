<!DOCTYPE html>
<html lang="he">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>כרטיס ביקור</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <script src="https://kit.fontawesome.com/cd34643dc0.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="flip-container box3" aria-label="הפוך כרטיס">
        <div class="flipper">
            <div class="front"></div>
            <div class="back">
                <h1>סהר דגן</h1>
                <p>עיצוב ופיתוח אתרים</p>
                <div class="icons">
                    <div class="icon-group">
                        <span class="bold"><i class="fa-solid fa-phone"></i></span>
                        <span class="contact">052-2025012</span>
                    </div>
                    <div class="icon-group">
                        <span class="bold"><i class="fa-solid fa-envelope"></i></span>
                        <a class="contact" href="mailto:sahardagannn@gmail.com">sahardagannn@gmail.com</a>
                    </div>
                    <div class="icon-group">
                        <span class="bold"><i class="fa-solid fa-globe"></i></span>
                        <a class="contact" href="http://www.sahrdagan.com">www.sahrdagan.com</a>
                    </div>
                </div>
                <a href="#" class="icon-box"><i class="fa-brands fa-facebook"></i></a>
                <a href="#" class="icon-box"><i class="fa-brands fa-twitter"></i></a>
                <a href="#" class="icon-box"><i class="fa-brands fa-google-plus"></i></a>
                <a href="#" class="icon-box"><i class="fa-brands fa-linkedin"></i></a>
                <a href="#" class="icon-box"><i class="fa-brands fa-github"></i></a>
            </div>
        </div>
    </div>

    <script>
        function handleClickOutside(event) {
            if (!document.querySelector('.box3').contains(event.target)) {
                document.querySelector('.box3').classList.remove('flipped');
            }
        }

        function handleCardClick(event) {
            event.stopPropagation(); // למנוע את התפשטות האירוע
            document.querySelector('.box3').classList.toggle('flipped');
        }

        document.addEventListener('DOMContentLoaded', function () {
            // הוספת אירוע קליק לכרטיס
            document.querySelector('.box3').addEventListener('click', handleCardClick);

            // הוספת אירוע קליק לדף כדי להחזיר את הכרטיס למצב הרגיל
            document.addEventListener('click', handleClickOutside);
        });

        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function () {
                navigator.serviceWorker.register('./sw.js').then(function (registration) {
                    console.log('Service Worker registered with scope:', registration.scope);
                }, function (error) {
                    console.log('Service Worker registration failed:', error);
                });
            });
        }

        let deferredPrompt;
        const addBtn = document.createElement('button');
        addBtn.textContent = 'הוסף למסך הבית';
        addBtn.style.display = 'none'; // נסתר ברירת מחדל

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            addBtn.style.display = 'block'; // הצג את הכפתור
            document.body.appendChild(addBtn);
        });

        addBtn.addEventListener('click', () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((result) => {
                    if (result.outcome === 'accepted') {
                        console.log('User accepted the A2HS prompt');
                    } else {
                        console.log('User dismissed the A2HS prompt');
                    }
                    deferredPrompt = null;
                });
            }
        });
    </script>
</body>

</html>